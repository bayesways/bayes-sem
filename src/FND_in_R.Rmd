---
title: "Factor Models in R"
author: "Konstantinos Vamvourellis"
date: "10/23/2019"
output:
  html_document:
    df_print: paged
    fig_caption: yes
    fig_height: 10
    fig_width: 10
    number_sections: no
    theme: lumen
    toc: yes
    toc_depth: 1
    toc_float: no
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
```


```{r}
library('readr')
library('dplyr')
library('lavaan')
```
## Load data

```{r}
df = read_csv("../dat/FND_processed.csv")
names(df)=paste0('x', seq(1:6))
glimpse(df)
```

## CFA with `lavaan`

```{r}
model <- 'v1  =~ x1 + x2 + x3 
          v2 =~ x4 + x5 + x6'
fit <- cfa(model, data=df, ordered=names(df))
summary(fit, fit.measures=TRUE, standardized = T)
```

```{r}
library(psych)
m = fa(df, nfactors=2, cor="poly", rotate = 'none')
m$loadings
```

```{r}
fa.diagram(m)
```

